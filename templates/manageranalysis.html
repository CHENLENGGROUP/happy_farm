{% extends 'main.html' %}

{% block additional_css %}
<!-- Morris Charts CSS -->
    <link href="../static/vendors/bower_components/morris.js/morris.css" rel="stylesheet" type="text/css"/>
<!-- vector map CSS -->
	<link href="../static/vendors/vectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet" type="text/css"/>
{% end %}

{% block additional_css_after_style %}
<style>
    .static_div ul li{
        display: inline-block;
    }
</style>
{% end %}

{% block main_part %}
<div class="row">
    <div class="col-lg-4">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark"><i class="icon-pie-chart mr-10"></i>上月工作量占比</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <canvas id="proportion_of_work" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark"><i class="icon-pie-chart mr-10"></i>上月迟到量占比</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <canvas id="proportion_of_mistake" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark"><i class="icon-pie-chart mr-10"></i>上月工作错误占比</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <canvas id="proportion_of_fault" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-4">
        <div class="panel panel-primary card-view">
            <div class="panel-heading mb-20">
                <div class="pull-left">
                    <h6 class="panel-title txt-light">上月优秀员工 TOP3</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <div class="table-wrap">
                        <div class="table-responsive">
                            <table  class="table  top-countrie" >
                                <tbody>
                                    {% for item in best_top3_career %}
                                    <tr>
                                        <td>
                                            {{item['real_name']}}
                                        </td>
                                        <td>
                                            {{round(item['rate'],2)}}
                                        </td>
                                    </tr>
                                    {% end %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-8">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark"><i class=" icon-control-pause mr-10"></i>本月处理事件</h6>
                </div>
                <div class="pull-right static_div" style="height: 20px;">
                    <ul style="" id="duration_ul_2">
                        {% for i in range(0, len(manager_list)) %}
                        <li class="mr-20">
                            <div class="radio">
                                {% if i==0 %}
                                <input  type="radio" name="radio_1" id="{{i}}" value="{{manager_list[i]['manager_id']}}" checked>
                                {% else %}
                                <input  type="radio" name="radio_1" id="{{i}}" value="{{manager_list[i]['manager_id']}}">
                                {% end %}
                                <label for="{{i}}">{{manager_list[i]['real_name']}}</label>
                            </div>
                        </li>
                        {% end %}
                    </ul>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div id="morris_extra_bar_chart" class="morris-chart" style="height:224px;"></div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-4">
        <div class="panel panel-primary card-view">
            <div class="panel-heading mb-20">
                <div class="pull-left">
                    <h6 class="panel-title txt-light">员工工资表</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <div class="table-wrap">
                        <div class="table-responsive">
                            <table  class="table  top-countries" >
                                <tbody>
                                    <tr>
                                        <td>
                                            United Kingdom
                                        </td>
                                        <td>
                                            $50
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Malaysia
                                        </td>
                                        <td>
                                            $20
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Australia
                                        </td>
                                        <td>
                                            $5
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>
                                            United States
                                        </td>
                                        <td>
                                            $5
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            United States
                                        </td>
                                        <td>
                                            $5
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-8">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark">工资明细表</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body" style="height: 330px;">
                    <div class="table-wrap mt-40">
                        <div class="table-responsive">
                            <table class="table mb-0">
                                <thead>
                                  <tr>
                                    <th>#</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Username</th>
                                    <th>Role</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr>
                                    <td>1</td>
                                    <td>Jens</td>
                                    <td>Brincker</td>
                                    <td>Brincker123</td>
                                    <td><span class="label label-danger">admin</span> </td>
                                  </tr>
                                  <tr>
                                    <td>2</td>
                                    <td>Mark</td>
                                    <td>Hay</td>
                                    <td>Hay123</td>
                                    <td><span class="label label-info">member</span> </td>
                                  </tr>
                                  <tr>
                                    <td>3</td>
                                    <td>Anthony</td>
                                    <td>Davie</td>
                                    <td>Davie123</td>
                                    <td><span class="label label-warning">developer</span> </td>
                                  </tr>
                                  <tr>
                                    <td>4</td>
                                    <td>David</td>
                                    <td>Perry</td>
                                    <td>Perry123</td>
                                    <td><span class="label label-success">supporter</span> </td>
                                  </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% end %}

{% block additional_script %}
<!-- ChartJS JavaScript -->
	<script src="../static/vendors/chart.js/Chart.min.js"></script>
<!-- Morris Charts JavaScript -->
    <script src="../static/vendors/bower_components/raphael/raphael.min.js"></script>
    <script src="../static/vendors/bower_components/morris.js/morris.min.js"></script>
<!-- Vector Maps JavaScript -->
    <script src="../static/vendors/vectormap/jquery-jvectormap-2.0.2.min.js"></script>
    <script src="../static/vendors/vectormap/jquery-jvectormap-cn-mill.js"></script>
    <script src="../static/addtionalJS/general_functions.js"></script>
    <script>
    //工作量占比初始化
    $(document).ready(function () {
        var manager_name_lables_str = "{{manager_real_name_lable}}";
        var name_lables = eval_str(manager_name_lables_str);
        if( $('#proportion_of_work').length > 0 ){
            var workingload_data = "{{workingload}}";
            workingload_data = eval_str(workingload_data)
            draw_pie_chart(name_lables,workingload_data,"proportion_of_work");
        }
        //迟到量占比初始化
         if( $('#proportion_of_mistake').length > 0 ){
            var mistake_data = "{{mistake_count_list}}";
            mistake_data = eval_str(mistake_data);
            draw_pie_chart(name_lables,mistake_data,"proportion_of_mistake");
        }
        //犯错量初始化
         if( $('#proportion_of_fault').length > 0 ){
             draw_pie_chart(name_lables, [300, 50, 100], "proportion_of_fault");
        }

        //本月处理事件
        var data_set = "{{manager_handle_event_data}}";
        data_set = eval_str(data_set)[0];
        if($('#morris_extra_bar_chart').length > 0){
            // Morris bar chart
            var manager_event_bar_chart = draw_barchart("morris_extra_bar_chart",data_set[1],'period',
                ['msg_reply','product_h','order_h'],['消息处理数','商品处理数','订单处理数']);
	    }

	    $("#duration_ul_2 li input").click(function () {
            var manager_id = parseInt($(this).attr("value"));
            var m_data = data_set[manager_id];
            manager_event_bar_chart.setData(m_data);
        })
    })


    </script>
{% end %}