{% extends 'main.html' %}

{% block additional_css %}
<link href="../static/vendors/bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css"/>
<link href="../static/vendors/bower_components/bootstrap-daterangepicker/daterangepicker.css" rel="stylesheet" type="text/css"/>
<link href="../static/vendors/bower_components/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet" type="text/css"/>
<link href="../static/vendors/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.css" rel="stylesheet" type="text/css"/>
<link href="../static/vendors/bower_components/dropzone/dist/dropzone.css" rel="stylesheet" type="text/css"/>
<link href="../static/vendors/bower_components/morris.js/morris.css" rel="stylesheet" type="text/css"/>
<!-- Bootstrap Dropify CSS -->
<link href="../static/vendors/bower_components/dropify/dist/css/dropify.css" rel="stylesheet" type="text/css"/>
{% end %}

{% block additional_css_after_style %}
<link href="../static/addtionalCSS/productDetail_addcss.css" rel="stylesheet" type="text/css"/>
{% end %}

{% block main_part %}
<div class="row">
    <div class="col-sm-3 ol-md-3 col-xs-12">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark">商品主图片</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <p class="text-muted">添加商品主图片</p>
                    <div id="main" class="mt-40">
                        <input type="file" id="input-file-now" class="dropify" />
                    </div>
                </div>
            </div>
        </div>
    </div>
   <div class="col-sm-3 ol-md-3 col-xs-12">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark">商品图片2</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <p class="text-muted">添加商品详细列表图片</p>
                    <div class="mt-40">
                        <input type="file" id="input-file-now2" class="dropify" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-3 ol-md-3 col-xs-12">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark">商品图片3</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <p class="text-muted">添加商品详细列表图片</p>
                    <div class="mt-40">
                        <input type="file" id="input-file-now3" class="dropify" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-3 ol-md-3 col-xs-12">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark">商品图片4</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <p class="text-muted">添加商品详细列表图片</p>
                    <div class="mt-40">
                        <input type="file" id="input-file-now4" class="dropify" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default card-view">
            <div class="panel-heading">
                <div class="pull-left">
                    <h6 class="panel-title txt-dark">商品信息</h6>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="panel-wrapper collapse in">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-12 col-xs-12">
                            <div class="form-wrap">
                                <form action="#" data-toggle="validator" id="product_info_from">
                                    <div class="form-body">
                                        <h6 class="txt-dark capitalize-font"><i class="icon-note mr-10"></i>商品基本信息</h6>
                                        <hr>
                                        <!--Product basic infomation-->
                                        <!--product name, product brief-->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品名字</label>
                                                    <input name="product_name" type="text" value="{{product_info['product_name']}}"
                                                           class="form-control" placeholder="请输入商品名字..." disabled required>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品简介</label>
                                                    <input name="brief" type="text" value="{{product_info['brief']}}"
                                                           class="form-control" placeholder="请输入商品简介，不多于40字,可以为空..." disabled>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <!--product type, product hot-->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品类型</label>
                                                    {% set product_type=product_info['product_type'] %}
                                                    {% if product_type == 0 %}
                                                    <input name="product_type" type="text" value="普通商品"
                                                           class="form-control" required disabled readonly>
                                                    {% elif product_type == 1 %}
                                                    <input name="product_type" type="text" value="领养商品"
                                                           class="form-control" required disabled readonly>
                                                    {% else %}
                                                    <input name="product_type" type="text" value="虚拟商品"
                                                           class="form-control" required disabled readonly>
                                                    {% end %}
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品热度</label>
                                                    <select name="is_hot" class="selectpicker" data-style="form-control" id="is_hot_select" disabled>
                                                        {% if product_info['is_hot'] == 0 %}
                                                        <option db_id="0" selected>非热门商品</option>
                                                        <option db_id="1">热门商品</option>
                                                        {% else %}
                                                        <option db_id="0">非热门商品</option>
                                                        <option db_id="1" selected>热门商品</option>
                                                        {% end %}
                                                    </select>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <!--product stock, product unit-->
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品库存</label>
                                                    <input disabled name="stock" type="text" value="{{product_info['stock']}}"
                                                           class="form-control" placeholder="请输入商品库存(认领商品库存只能为1)" required>
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品单位</label>
                                                    <input disabled name="unit" type="text" value="{{product_info['unit']}}"
                                                           class="form-control" placeholder="请输入商品单位,例如,克/千克..." required>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        <!--product category-->
                                        <div class="row">
                                            {% for i in range(0, len(category_list)) %}
                                            <div class="{{'col-md-'+str(12/len(category_list))}}">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">{{ '商品第'+ str(i+1) + '分类' }}</label>
                                                    <select disabled name="product_category" class="selectpicker cate_select" data-style="form-control" data-hide-disabled="true" id="{{'cate_select_'+str(i+1)}}">
                                                        {% for item in category_list[i] %}
                                                            {% if item['disabled'] == 'false' %}
                                                                {% if item['selected'] == 'true' %}
                                                                <option selected db_id="{{item['category_id']}}" c_id="{{item['category_id']}}" p_id="{{item['parent_category_id']}}">
                                                                    {{item['category_content']}}
                                                                </option>
                                                                {% else%}
                                                                <option db_id="{{item['category_id']}}" c_id="{{item['category_id']}}" p_id="{{item['parent_category_id']}}">
                                                                    {{item['category_content']}}
                                                                </option>
                                                                {% end %}
                                                            {% else %}
                                                            <option disabled db_id="{{item['category_id']}}" c_id="{{item['category_id']}}" p_id="{{item['parent_category_id']}}">
                                                                {{item['category_content']}}
                                                            </option>
                                                            {% end %}
                                                        {% end %}
                                                    </select>
                                                </div>
                                            </div>
                                            {% end %}
                                        </div>
                                        <!--product attribute-->
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品标签</label>
                                                    <div class="panel-wrapper collapse in">
                                                        <input name="attribute" type="text" value="{{product_info['attribute']}}" disabled
                                                               data-role="tagsinput" placeholder="添加标签(确认按回车键)"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--product property-->
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品属性</label>
                                                    <div class="panel-wrapper collapse in">
                                                        <input name="product_property" style="min-width: 220px" type="text" value="{{product_info['property_str']}}"
                                                               disabled data-role="tagsinput" placeholder="分隔使用冒号"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!--product description-->
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品描述</label>
                                                    <textarea name="description" class="form-control" rows="5"
                                                              disabled placeholder="请输入商品描述，不多于200字,可以为空...">
                                                        {{product_info['description']}}
                                                    </textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <!--/Product basic infomation-->

                                        <div class="seprator-block"></div>

                                        <h6 class="txt-dark capitalize-font"><i class="icon-grid mr-10"></i>商品补充信息</h6>
                                        <hr>
                                        <!--Product Aditional infomation-->
                                        {% if product_info['product_type'] != 1 %}
                                        <!--Normal Product-->
                                        <div id="normal_product_add_info">
                                            <!--Product price-->
                                            <div class="row">
                                                <div class="col-md-6 ">
                                                    <div class="form-group">
                                                        <label class="control-label mb-10">市场价格</label>
                                                        <input name="market_price" type="text" value="{{product_info['market_price']}}"
                                                               disabled class="form-control" placeholder="请输入商品市场价，可以为空..." required>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 ">
                                                    <div class="form-group">
                                                        <label class="control-label mb-10">商品价格</label>
                                                        <input name="shop_price" type="text" value="{{product_info['shop_price']}}"
                                                               disabled class="form-control" placeholder="请输入商品单价..." required>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--Product Promote-->
                                            <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label mb-10">商品特价</label>
                                                    <input name="promote_price" type="text" value="{{product_info['promote_price']}}"
                                                           disabled class="form-control" placeholder="请输入商品特价,可为空...">
                                                </div>
                                            </div>
                                            <!--/span-->
                                            <div class="col-lg-6">
                                                <div class="form-group mb-0">
                                                    <label class="control-label mb-10 text-left">促销日期</label>
                                                    <input disabled class="form-control input-limit-datepicker dropup" type="text" name="promote_date"/>
                                                </div>
                                            </div>
                                            <!--/span-->
                                        </div>
                                        </div>
                                        {% else %}
                                        <!--Subscription Product-->
                                        <div id="sub_product_add_info">
                                            <div class="row">
                                                <div class="col-md-4 ">
                                                    <div class="form-group">
                                                        <label class="control-label mb-10">首月付款</label>
                                                        <input name="first_pay" type="text" value="{{product_info['first_pay']}}"
                                                               disabled class="form-control" placeholder="请输入首月需付款..." required>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 ">
                                                    <div class="form-group">
                                                        <label class="control-label mb-10">每月付款</label>
                                                        <input name="each_month_pay" type="text" value="{{product_info['each_month_pay']}}"
                                                               disabled class="form-control" placeholder="请输入每月需付款..." required>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 ">
                                                    <div class="form-group">
                                                        <label class="control-label mb-10">需付月数</label>
                                                        <input name="need_to_pay_month" type="text" value="{{product_info['need_to_pay_month']}}"
                                                               disabled class="form-control" placeholder="请输入需月数..." required>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% end %}
                                    </div>
                                </form>
                                <div class="form-actions mt-10">
                                    <button type="submit" id="product_info_modify" class="btn btn-success btn-anim"><i class="icon-pencil">
                                    </i><span class="btn-text">修改</span><i style="display: none" class="fa fa-spinner fa-spin fa-3x fa-fw"></i></button>
                                    <button type="button" class="btn btn-default">取消</button>
                                </div>
                                <div class="row" style="display: none;">
                                    <div class="col-md-12">
                                        <div class="panel panel-default card-view">
                                            <div class="panel-heading">
                                                <div class="pull-left">
                                                    <h6 class="panel-title txt-dark">Date time picker</h6>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                            <div class="panel-wrapper collapse in">
                                                <div class="panel-body">
                                                    <div class="form-wrap">
                                                        <form>
                                                            <div class="row">
                                                                <div class="col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="control-label mb-10 text-left">date time pick</label>
                                                                        <div class='input-group date' id='datetimepicker1'>
                                                                            <input type='text' class="form-control" />
                                                                            <span class="input-group-addon">
                                                                                <span class="fa fa-calendar"></span>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <div class="form-group">
                                                                        <label class="control-label mb-10 text-left">time pick</label>
                                                                        <div class='input-group date' id='datetimepicker2'>
                                                                            <input type='text' class="form-control" />
                                                                            <span class="input-group-addon">
                                                                                <span class="fa fa-clock-o"></span>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <label class="control-label mb-10 text-left">inline date pick</label>
                                                                    <div class="form-group">
                                                                        <div class='input-group date' id='datetimepicker3'></div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <label class="control-label mb-10 text-left">inline date time pick</label>
                                                                    <div class="form-group">
                                                                        <div class='input-group date' id='datetimepicker4'></div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% end %}

{% block additional_script %}
<script type="text/javascript" src="../static/vendors/bower_components/moment/min/moment-with-locales.js"></script>

<script src="../static/vendors/bower_components/mjolnic-bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
<script type="text/javascript" src="../static/vendors/bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
<script src="../static/vendors/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
<script src="../static/vendors/bower_components/bootstrap-validator/dist/validator.min.js"></script>
<script src="../static/vendors/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
<script src="../static/vendors/bower_components/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
<script src="../static/vendors/bower_components/dropzone/dist/dropzone.js"></script>
<script src="../static/vendors/bower_components/dropify/dist/js/dropify.js"></script>
<script src="../static/vendors/bower_components/sweetalert/dist/sweetalert.min.js"></script>
<script src="../static/addtionalJS/modifyproductinfo_addjs.js"></script>
{% if product_info['product_type']!=1 %}
<script>
    var myDate = new Date();
    var current_date = myDate.getFullYear()+"-"+(myDate.getMonth()+1)+"-"+myDate.getDate()
    var start_date = "{{product_info['promote_start_date']}}"
    var end_date = "{{product_info['promote_end_date']}}"
    $('.input-limit-datepicker').daterangepicker({
        locale:{
            format: 'YYYY-MM-DD'
        },
        startDate:start_date,
        endDate:end_date,
        minDate: start_date,
        buttonClasses: ['btn', 'btn-sm'],
        applyClass: 'btn-info',
        cancelClass: 'btn-default',
    });
    $(document).ready(function () {
        $('#main .dropify-wrapper').css('background-image','url("{{product_info['thumb_img_url']}}")');
    });
</script>
{% end %}
<script src="../static/addtionalJS/productDetail_addjs.js"></script>
{% end %}